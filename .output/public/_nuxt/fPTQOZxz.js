import{r as u,ae as C,o as i,c,a as t,b as r,w as o,a3 as F,J as g,W as x,F as W,e as m,l as h,K as z,a2 as N}from"./CWB9fX6Z.js";import{a as T,b as $,_ as j}from"./CgzzJw_G.js";import{_ as q}from"./BRWasAgT.js";import{z as b}from"./DXqQCM1T.js";import{u as A}from"./DrYtgDOX.js";const R={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4"},D={class:"space-y-4 text-center"},G={class:"flex justify-center"},J={class:"p-3 bg-gradient-to-r from-teal-600 to-teal-700 rounded-full"},K={key:0,class:"space-y-6"},L={key:0,class:"flex items-center space-x-2"},M={class:"text-center"},O={__name:"SignIn",setup(y){const d=u(!1),n=u(""),l=u(!1),w=A(),{toastError:k}=T(),p=C().public.baseUrl;console.log('"""""""""""redirectUrl""""""""""""""": ',p);const U=b.string().email("Please enter a valid email address"),a=u(""),_=()=>{try{U.parse(n.value),a.value=""}catch(s){s instanceof b.ZodError&&(a.value=s.errors[0].message)}},E=async()=>{if(_(),!a.value){l.value=!0;try{const{error:s}=await w.auth.signInWithOtp({email:n.value,options:{emailRedirectTo:`${p}/confirm`}});s?k({title:"Error authenticating",description:s.message}):d.value=!0}catch(s){console.error("Error authenticating:",s),n.value="",a.value="",d.value=!1}finally{l.value=!1}}};return(s,e)=>{const v=z,S=$,B=j,I=N,f=q;return i(),c("div",R,[e[8]||(e[8]=t("div",{class:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-700/20 via-transparent to-transparent"},null,-1)),r(f,{class:"w-full max-w-md relative z-10 bg-slate-800/50 border-slate-700 backdrop-blur-sm shadow-2xl"},{header:o(()=>[t("div",D,[t("div",G,[t("div",J,[r(v,{name:"i-heroicons-arrow-trending-up",class:"h-8 w-8 text-white"})])]),e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-white"},"Welcome Back",-1)),e[2]||(e[2]=t("p",{class:"text-slate-400"},"Sign in to your finance dashboard",-1))])]),default:o(()=>[d.value?(i(),h(f,{key:1,ui:{divide:"divide-y-0",header:{padding:"px-4 py-5 sm:px-6"},body:{padding:"px-4 py-5 sm:p-6"}}},{header:o(()=>e[4]||(e[4]=[t("span",{class:"font-bold text-xl"},"Email has been sent",-1)])),default:o(()=>[t("div",M,[t("p",null,[e[5]||(e[5]=m(" We have sent an email to ")),t("strong",null,x(n.value),1),e[6]||(e[6]=m(" with a link to sign in "))]),e[7]||(e[7]=t("p",{class:"font-bold"},"Important: the link will expire in 5 minutes.",-1))])]),_:1})):(i(),c("div",K,[t("form",{onSubmit:F(E,["prevent"])},[r(B,{label:"Email Address",name:"email",class:"mb-2 text-sm",required:!0,help:"You will receive an email with the confirmation link"},{default:o(()=>[r(S,{type:"email",required:"",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=V=>n.value=V),onBlur:_,placeholder:"Enter your email"},{leading:o(()=>[r(v,{name:"i-heroicons-envelope"})]),_:1},8,["modelValue"])]),_:1}),t("p",{class:g([{"text-red-600":a.value},"h-5 text-sm mb-2"])},x(a.value),3),r(I,{type:"submit",variant:"outline",color:"teal",block:"",class:g(["w-full bg-gradient-to-r  text-white font-medium py-2.5 transition-all duration-200 rounded-xl shadow-md hover:shadow-xl",{"transition-transform hover:scale-[1.02] active:scale-[0.98]":!l.value&&!a.value}]),loading:l.value,disabled:l.value||!!a.value},{default:o(()=>[l.value?(i(),c("div",L,e[3]||(e[3]=[t("span",null,"Signing in...",-1)]))):(i(),c(W,{key:1},[m(" Sign In ")],64))]),_:1},8,["class","loading","disabled"])],32)]))]),_:1})])}}},X={__name:"login",setup(y){return(d,n)=>(i(),h(O))}};export{X as default};
