import{a as w,_ as x}from"./DTyaJT8V.js";import{h as V,r as c,l as y,w as r,u as a,a2 as S,o as k,b as l,a3 as B}from"./CVTLfr-j.js";import{_ as E}from"./DnddY5KO.js";import{z as i}from"./DXqQCM1T.js";import{u as F}from"./CkJbm7BT.js";import{u as C}from"./CIyTCRbJ.js";const I={__name:"profile",setup(N){var u;const _=F(),s=V(),{toastSuccess:f,toastError:b}=C(),n=c(!1),e=c({name:(u=s.value.user_metadata)==null?void 0:u.full_name,email:s.value.email}),v=i.object({name:i.string().min(2).optional(),email:i.string().email()}),h=async()=>{n.value=!0;try{const o={data:{full_name:e.value.name}};e.value.email!==s.value.email&&(o.email=e.value.email);const{error:t}=await _.auth.updateUser(o);if(t)throw t;f({title:"Profile updated",description:"Your profile has been updated"})}catch(o){b({title:"Error updating profile",description:o.message})}finally{n.value=!1}};return(o,t)=>{const p=w,d=x,U=B,g=E;return k(),y(g,{state:a(e),schema:a(v),onSubmit:S(h,["prevent"])},{default:r(()=>[l(d,{class:"mb-4",label:"Full Name",name:"name"},{default:r(()=>[l(p,{modelValue:a(e).name,"onUpdate:modelValue":t[0]||(t[0]=m=>a(e).name=m)},null,8,["modelValue"])]),_:1}),l(d,{class:"mb-4",label:"Email",name:"email",help:"You will receive a confirmation email on both the old and the new addresses if you modify the email address"},{default:r(()=>[l(p,{modelValue:a(e).email,"onUpdate:modelValue":t[1]||(t[1]=m=>a(e).email=m)},null,8,["modelValue"])]),_:1}),l(U,{type:"submit",color:"black",variant:"solid",label:"Save",loading:a(n),disabled:a(n)},null,8,["loading","disabled"])]),_:1},8,["state","schema"])}}};export{I as default};
